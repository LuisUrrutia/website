---
import type { HTMLAttributes } from "astro/types";
import IconClose from "@/assets/icons/close.svg";

interface Props extends HTMLAttributes<"button"> {
	label?: string;
	hidden?: boolean;
}

const {
	class: className,
	label = "Clear filters",
	hidden = true,
	...attrs
} = Astro.props;
---

<button
	type="button"
	class:list={[
		"clear-filter-btn border-subtitle text-subtitle hover:border-title hover:text-title focus-visible:outline-title flex size-8 cursor-pointer items-center justify-center rounded-full border bg-transparent focus-visible:outline-2 focus-visible:outline-offset-2",
		{ hidden },
		className,
	]}
	aria-label={label}
	{...attrs}
>
	<IconClose class="size-4" />
</button>

<style>
	.clear-filter-btn {
		--animation-duration: 0.25s;
		transition: transform var(--animation-duration) ease;
	}

	.clear-filter-btn:hover {
		transform: rotate(90deg) scale(1.1);
	}

	.clear-filter-btn.hidden {
		opacity: 0;
		transform: scale(0.5);
		pointer-events: none;
	}

	.clear-filter-btn.appearing {
		animation: clear-appear var(--animation-duration) ease forwards;
	}

	.clear-filter-btn.disappearing {
		animation: clear-disappear var(--animation-duration) ease forwards;
	}

	@keyframes clear-appear {
		from {
			opacity: 0;
			transform: rotate(-90deg) scale(0.5);
		}
		to {
			opacity: 1;
			transform: rotate(0) scale(1);
		}
	}

	@keyframes clear-disappear {
		from {
			opacity: 1;
			transform: rotate(0) scale(1);
		}
		to {
			opacity: 0;
			transform: rotate(90deg) scale(0.5);
		}
	}
</style>
