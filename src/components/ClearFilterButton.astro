---
import type { HTMLAttributes } from "astro/types";
import IconClose from "@/assets/icons/close.svg";

interface Props extends HTMLAttributes<"button"> {
	label?: string;
	hidden?: boolean;
}

const {
	class: className,
	label = "Clear filters",
	hidden = true,
	...attrs
} = Astro.props;
---

<button
	type="button"
	class:list={[
		"clear-filter-btn border-subtitle text-subtitle hover:border-title hover:text-title focus-visible:outline-title flex size-8 cursor-pointer items-center justify-center rounded-full border bg-transparent transition-transform duration-(--spin-duration) ease-out hover:scale-110 hover:rotate-90 focus-visible:outline-2 focus-visible:outline-offset-2",
		{ "is-hidden": hidden },
		className,
	]}
	aria-label={label}
	{...attrs}
>
	<IconClose class="size-4" aria-hidden="true" />
</button>

<style>
	.clear-filter-btn.is-hidden {
		opacity: 0;
		transform: scale(0.5);
		pointer-events: none;
	}

	.clear-filter-btn.appearing {
		animation: spin-in var(--spin-duration) ease forwards;
	}

	.clear-filter-btn.disappearing {
		animation: spin-out var(--spin-duration) ease forwards;
	}

	@keyframes spin-in {
		from {
			opacity: 0;
			transform: rotate(-90deg) scale(0.5);
		}
		to {
			opacity: 1;
			transform: rotate(0) scale(1);
		}
	}

	@keyframes spin-out {
		from {
			opacity: 1;
			transform: rotate(0) scale(1);
		}
		to {
			opacity: 0;
			transform: rotate(90deg) scale(0.5);
		}
	}
</style>
