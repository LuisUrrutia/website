---
/**
 * CanonicalMeta - Canonical URL and hreflang link tags.
 *
 * Renders canonical link and hreflang alternate links for
 * internationalized pages to help search engines understand
 * language/region variants.
 *
 * @see https://developers.google.com/search/docs/specialty/international/localized-versions
 */
import { locales, getLocalizedPath, type Locale } from "@/i18n";

export interface Props {
	/** Base site URL (without trailing slash) */
	siteUrl: string;
	/** Path without locale prefix */
	pathWithoutLocale: string;
	/** Current locale */
	locale: Locale;
}

const { siteUrl, pathWithoutLocale, locale } = Astro.props;

const canonicalPath = getLocalizedPath(pathWithoutLocale, locale);
const canonicalUrl = `${siteUrl}${canonicalPath}`;
---

<link rel="canonical" href={canonicalUrl} />
{
	locales.map((loc) => (
		<link
			rel="alternate"
			hreflang={loc}
			href={`${siteUrl}${getLocalizedPath(pathWithoutLocale, loc)}`}
		/>
	))
}
<link
	rel="alternate"
	hreflang="x-default"
	href={`${siteUrl}${pathWithoutLocale}`}
/>
