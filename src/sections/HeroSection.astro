---
/**
 * HeroSection - The main introduction section of the portfolio.
 *
 * Displays profile picture, name, bio, work status, location, social links,
 * and a marquee of companies worked with.
 *
 * @example
 * ```astro
 * <HeroSection
 *   socials={{ github: "https://github.com/user", linkedin: "https://linkedin.com/in/user" }}
 *   workStatus="open"
 * />
 * ```
 */
import type { Company } from "@/types/company";
import type { SocialLinksProps } from "@/types/social";
import Card from "@/components/Card.astro";
import CompanyMarquee from "@/components/CompanyMarquee.astro";
import Highlight from "@/components/Highlight.astro";
import IconRocket from "@/assets/icons/rocket.svg";
import LocationBadge from "@/components/LocationBadge.astro";
import ProfilePicture from "@/components/ProfilePicture.astro";
import SocialLinks from "@/components/SocialLinks.astro";
import ThemeToggle from "@/components/ThemeToggle.astro";
import WorkStatusBadge from "@/components/WorkStatusBadge.astro";
import { companies as defaultCompanies } from "@/data/companies";

type WorkStatus = "open" | "busy";

interface Props {
  /** Social media links configuration. */
  socials?: SocialLinksProps;
  /** Current work availability status. Defaults to "busy". */
  workStatus?: WorkStatus;
  /** List of companies to display in the marquee. */
  companies?: Company[];
  /** Section ID for navigation. Defaults to "hero". */
  id?: string;
}

const {
  socials,
  workStatus = "busy",
  companies = defaultCompanies,
  id = "hero",
} = Astro.props;
const { t } = Astro.locals;

const statusTextKey = workStatus === "open" ? "status.open" : "status.busy";
---

<Card
  as="section"
  id={id}
  aria-labelledby={`${id}-heading`}
  class="flex flex-col gap-5"
>
  <div class="flex flex-col gap-4 lg:flex-row">
    <ProfilePicture alt={t("hero.photoAlt")} />

    <div class="flex flex-1 flex-col gap-4">
      <div class="flex flex-row justify-between gap-5 py-2 md:py-0">
        <WorkStatusBadge status={workStatus} statusText={t(statusTextKey)} />
        <div class="flex items-center gap-3">
          {
            socials && (
              <SocialLinks ariaLabel={t("a11y.socialLinks")} {...socials} />
            )
          }
        </div>
      </div>

      <div class="flex flex-col gap-2.5 py-2.5">
        <div>
          <h1 id={`${id}-heading`} class="text-title text-4xl font-semibold">
            {t("hero.greeting")}
            <span class="block sm:inline">{t("hero.intro")}</span>
          </h1>
          <p class="text-muted my-1 text-sm">
            {t("hero.tagline.prefix")}<a
              href="https://www.openzeppelin.com/"
              target="_blank"
              rel="noopener noreferrer"
              class="text-accent underline-offset-2 hover:underline"
              >OpenZeppelin</a
            > Â· {t("hero.tagline.tech")}
          </p>
        </div>
        <p class="relative text-base font-light text-pretty">
          <Highlight color="sky">{t("hero.bio.role")}</Highlight>{
            t("hero.bio.middle")
          }<Highlight color="orange">{t("hero.bio.experience")}</Highlight>{
            t("hero.bio.suffix")
          }
        </p>
      </div>

      <LocationBadge location={t("hero.location")} />
    </div>
  </div>

  <div class="flex flex-col gap-3">
    <p class="flex items-center gap-1.5 text-sm font-extralight">
      <IconRocket />
      {t("hero.companies")}
    </p>
    <CompanyMarquee companies={companies} />
  </div>
</Card>
