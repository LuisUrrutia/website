---
import type { Post } from "@/types/post";
import Card from "@/components/Card.astro";
import BlogEntry from "@/components/BlogEntry.astro";
import ViewMoreLink from "@/components/ViewMoreLink.astro";

interface Props {
	posts: Post[];
	id?: string;
	viewMoreHref?: string;
}

const { posts, id = "latest-posts", viewMoreHref } = Astro.props;
const { t } = Astro.locals;
---

<Card id={id} class="flex flex-col gap-6">
	<h2 class="text-title text-2xl font-semibold">{t("blog.title")}</h2>

	{
		posts.length === 0 ? (
			<p class="text-secondary">{t("blog.empty")}</p>
		) : (
			<ul class="m-0 flex list-none flex-col p-0">
				{posts.map((post) => (
					<li>
						<BlogEntry
							title={post.title}
							category={post.category}
							date={post.date}
							href={post.href}
							slug={post.slug}
						/>
					</li>
				))}
			</ul>
		)
	}

	{
		viewMoreHref && (
			<ViewMoreLink
				class="py-6"
				href={viewMoreHref}
				text={t("blog.viewMore")}
			/>
		)
	}
</Card>
